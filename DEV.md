# 开发计划

## 1. 文档定位
- `README.md`：面向使用与部署，描述现状和运行方式。
- `DEV.md`：面向研发协作，维护开发计划、阶段状态和后续任务。

## 2. 计划分类（截至 2026-02-14）

### 2.1 已完成
- 工程骨架与配置加载：项目结构、共享/本地配置合并、启动配置校验。
- 飞书客户端封装：Bitable API 访问、IM 发消息、长连接事件接入。
- 字段名动态解析：启动期按字段名解析 field_id，支持字段变更后的配置恢复。
- 业务读模型与核心流程：日期决策、发卡、卡片回调、截止判定、统计发送。
- 调度与命令行：常驻 `run`、一次性 `send`、联调 `dev` 命令体系。
- 工程基础统一：日志统一为 Loguru，测试统一为 Pytest。

### 2.2 进行中
- 联调与回归深化：覆盖复杂异常场景、跨天场景、重复事件场景。
- 真实环境验证：结合飞书真实配置进行端到端验证与问题闭环。

### 2.3 待开展
- 运维与可观测性完善：结构化日志策略、告警策略、排障手册。
- 发布流程固化：灰度验证、上线检查清单、回滚策略。
- 回归资产持续化：沉淀标准回归清单并纳入发布门禁。

## 3. 任务池（滚动维护）
- 配置优先级规则联调覆盖（默认规则 vs 用餐定时配置覆盖规则）。
- 补充关键命令的端到端示例与失败场景说明。
- 增加生产运行值班排查路径（日志定位 -> 飞书后台 -> 配置核查）。
